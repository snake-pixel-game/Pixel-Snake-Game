<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>BlockStrikers â€” Dino Jump (Balanciert & schneller)</title>
<style>
html,body{
    margin:0;
    background:#061019;
    font-family: Arial, sans-serif;
    overflow:hidden;
}
canvas{
    width:100%;
    height:100%;
    display:block;
}
#hud{
    position:absolute;
    top:10px;
    left:10px;
    color:white;
    background:rgba(0,0,0,0.4);
    padding:8px 12px;
    border-radius:10px;
}
#hud span{
    display:block;
}
</style>
</head>
<body>

<canvas id="c"></canvas>

<div id="hud">
   <span id="score">Score: 0</span>
   <span id="speed">Speed: 1.0x</span>
   <span id="power">Power: â€“</span>
</div>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener("resize",resize);
resize();

let score = 0;
let worldSpeed = 5; // etwas schneller
let speedMultiplier = 1;

const player={
    x:250,
    y:0,
    w:70,
    h:50,
    vy:0,
    grounded:true,
    jumpPower:-11,
    gravity:0.62,
    shield:0,
    magnet:0,
    boost:0
};

function groundY(){
    return canvas.height * 0.78 - player.h;
}
player.y=groundY();

let obstacles=[];
let powerups=[];

let nextObstacle=900;
let nextPowerup=9000;

function spawnObstacle(){
    obstacles.push({
        x: canvas.width+100,
        y: groundY(),
        w:50,
        h:50
    });
}

function spawnPowerup(){
    powerups.push({
        x: canvas.width+80,
        y: canvas.height*0.5 + Math.random()*-200,
        size:40,
        type:["shield","magnet","boost"][Math.floor(Math.random()*3)]
    });
}

function jump(){
    if(player.grounded){
        player.vy=player.jumpPower;
        player.grounded=false;
    }
}

canvas.addEventListener("mousedown",jump);
canvas.addEventListener("touchstart",e=>{
  e.preventDefault();
  jump();
});

function rectHit(a,b){
    return !(
        a.x+a.w < b.x ||
        a.x > b.x+b.w ||
        a.y+a.h < b.y ||
        a.y > b.y+b.h
    );
}

function update(){

    // SPEED TUNING
    speedMultiplier = 1 + Math.min(0.8, score / 600);

    score += 0.03;

    document.getElementById("score").innerText="Score: "+Math.floor(score);
    document.getElementById("speed").innerText="Speed: "+speedMultiplier.toFixed(2)+"x";

    // PLAYER
    player.vy += player.gravity;
    player.y += player.vy;
    if(player.y>groundY()){
        player.y=groundY();
        player.vy=0;
        player.grounded=true;
    }

    // SPAWN
    nextObstacle--;
    if(nextObstacle<=0){
        spawnObstacle();
        nextObstacle = 650 + Math.random()*350; // regelmÃ¤ÃŸiger Abstand
    }

    nextPowerup--;
    if(nextPowerup<=0){
        spawnPowerup();
        nextPowerup=7000 + Math.random()*6000; // Power-Ups seltener
    }

    // MOVE
    obstacles.forEach(o=>{
        o.x -= worldSpeed*speedMultiplier;
    });

    powerups.forEach(p=>{
        p.x -= worldSpeed*speedMultiplier;
    });

    // COLLISION
    obstacles.forEach((o,i)=>{
        if(rectHit(o,player)){
            location.reload();
        }
        if(o.x+60<0) obstacles.splice(i,1);
    });

    powerups.forEach((p,i)=>{
        if(rectHit(
           {x:p.x,y:p.y,w:p.size,h:p.size},
           player
        )){
            document.getElementById("power").innerText="Power: "+p.type;
            powerups.splice(i,1);
        }
    });
}

function drawPowerup(p){
    ctx.save();
    const pulse = 1 + Math.sin(Date.now()/220)*0.15;

    ctx.beginPath();
    ctx.arc(p.x,p.y,p.size*1.4*pulse,0,Math.PI*2); // grÃ¶ÃŸer & auffÃ¤lliger
    ctx.fillStyle="rgba(80,180,255,0.12)";
    ctx.fill();

    ctx.beginPath();
    ctx.arc(p.x,p.y,p.size*0.5*pulse,0,Math.PI*2);
    const g = ctx.createRadialGradient(
        p.x,p.y,2,
        p.x,p.y,p.size
    );
    g.addColorStop(0,"#fff");
    g.addColorStop(1,"#36b7ff");
    ctx.fillStyle=g;
    ctx.fill();

    ctx.fillStyle="#023";
    ctx.font="20px Arial";
    ctx.textAlign="center";
    ctx.textBaseline="middle";

    let icon = p.type==="shield"?"â›¨":p.type==="magnet"?"ðŸ§²":"âš¡";
    ctx.fillText(icon,p.x,p.y+1);

    ctx.restore();
}

function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // BACKGROUND
    const bg=ctx.createLinearGradient(0,0,0,canvas.height);
    bg.addColorStop(0,"#071f33");
    bg.addColorStop(1,"#020610");
    ctx.fillStyle=bg;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // GROUND
    ctx.fillStyle="#0a2435";
    ctx.fillRect(0,canvas.height*0.78,canvas.width,canvas.height);

    // PLAYER (blue dino silhouette)
    ctx.save();
    ctx.translate(player.x,player.y);
    ctx.fillStyle="#2aa8ff";
    ctx.beginPath();
    ctx.roundRect(0,0,player.w,player.h,18);
    ctx.fill();
    
    // eye
    ctx.fillStyle="#fff";
    ctx.beginPath();
    ctx.arc(player.w*0.77,player.h*0.33,4,0,Math.PI*2);
    ctx.fill();

    ctx.restore();

    // OBSTACLES
    obstacles.forEach(o=>{
        ctx.fillStyle="#ff5a5a";
        ctx.beginPath();
        ctx.moveTo(o.x,o.y+o.h);
        ctx.lineTo(o.x+o.w/2,o.y);
        ctx.lineTo(o.x+o.w,o.y+o.h);
        ctx.closePath();
        ctx.fill();
    });

    // POWERUPS
    powerups.forEach(drawPowerup);
}

function loop(){
    update();
    draw();
    requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
